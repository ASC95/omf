<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script>
	function post_to_url(path, params, method) {
		method = method || 'post' // Set method to post by default, if not specified.
		var form = document.createElement('form');
		form.setAttribute('method', method);
		form.setAttribute('action', path);
		for(var key in params) {
			if(params.hasOwnProperty(key)) {
				var hiddenField = document.createElement('input');
				hiddenField.setAttribute('type', 'hidden');
				hiddenField.setAttribute('name', key);
				hiddenField.setAttribute('value', params[key]);
				form.appendChild(hiddenField);
			}
		}
		document.body.appendChild(form)
		form.submit()
	}
	</script>
</head>
<body>
	<div><img id="dsImage" src="data:image/png;base64,{{image}}" height=800 width=800></div>
	<script type="text/javascript">
	$(document).ready(function() {
	    $("#dsImage").on("click", function(event) {
	        var x = (event.pageX - this.offsetLeft);
	        //Keep this.offset which is always 8
	        console.log(event.pageX);
	        console.log(this.offsetLeft)
	        console.log("{{x_range}}");
	        var y = (event.pageY - this.offsetTop);
	        console.log("{{y_range}}");
	        var x_low = "{{x_low}}"
	        post_to_url("/testing", {x_click: x, y_click: y, x_low: "{{x_low}}", x_high: "{{x_high}}", y_low: "{{y_low}}", y_high: "{{y_high}}", counter: "{{counter}}"});
	    });
	});
	</script>
	<div><button id="changeRangeButton" type="button" onclick="changeRange()">Change Range</button></div>
</body>