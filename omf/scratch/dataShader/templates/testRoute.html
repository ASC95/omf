<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script>
	function post_to_url(path, params, method) {
		method = method || 'post' // Set method to post by default, if not specified.
		var form = document.createElement('form');
		form.setAttribute('method', method);
		form.setAttribute('action', path);
		for(var key in params) {
			if(params.hasOwnProperty(key)) {
				var hiddenField = document.createElement('input');
				hiddenField.setAttribute('type', 'hidden');
				hiddenField.setAttribute('name', key);
				hiddenField.setAttribute('value', params[key]);
				form.appendChild(hiddenField);
			}
		}
		document.body.appendChild(form)
		form.submit()
	}

	function changeRange(x, y){
		//var maxHeight = 800;
		//var maxWidth = 800;
		//let x_click = x
		//let x_range_high = Math.min((x / maxWidth + 0.25), 1)
		//let y_click = y
		//let y_range_high = Math.min((y / maxHeight + 0.25), 1)
		post_to_url("/testing", {x_click: x, y_click: y});
	}
	</script>
</head>
<body>
	<div><img id="dsImage" src="data:image/png;base64,{{image}}"></div>
	<script type="text/javascript">
	$(document).ready(function() {
	    $("#dsImage").on("click", function(event) {
	        var x = (event.pageX - this.offsetLeft);
	        console.log(x);
	        var y = (event.pageY - this.offsetTop);
	        console.log(y);
	        changeRange(x, y);
	    });
	});
	</script>
	<div><button id="changeRangeButton" type="button" onclick="changeRange()">Change Range</button></div>
</body>