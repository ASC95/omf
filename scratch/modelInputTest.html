<!-- Testing the way to get lots of variables into a model input. -->
<head>
	<title>Open Modeling Framework</title>
	<meta charset="utf-8">
	<link href="../static/omf.css" type="text/css" rel="stylesheet"/>
	<link rel="shortcut icon" href="../static/favicon.ico">
	<style>
		/*INPUT*/
		table.modelOptions {width:70%; text-align:left; margin-left:auto;}
		div.shortInput {width:446px; display:inline-block;}
		div.wideInput {width:892;}
		label {width:138px; line-height:28px; float:left; text-align:right;}
		input.modelInput, select.modelInput {width:300px; float:right; text-align:left;}
		#cancelButton {background:crimson;}
		#cancelButton:hover {background:red;}
		/*OUTPUT*/
		pre.stdoutBlock {display:inline-block; width:475px; overflow-x:hidden; padding-left:10px; vertical-align:top; font-size:8pt}
		div.stdouts {overflow-x:auto;white-space: nowrap; margin-top:0px;}
		div.tightContent {width:1000px; margin-left:auto; margin-right:auto; margin-top:0px; margin-bottom:20px; border-style: solid; border-color:gray; border-width:1px 0px 1px 0px; background-color:white;}
		div.tightContent div {margin-top:0px;margin-bottom:0px; border:none;}
		div.tightContent div + div {margin-top:0px; margin-bottom:0px;}
		p.reportTitle {padding:10px; width:1000px; margin:20px auto 0px auto; font-size:16pt;}
		#input {margin-top: 0px;}
		input {border-bottom:thin dotted black;text-align:right;padding-right:5px}
		button {width:auto;}
		td,th {text-align: right}
		.preRun, .running, .postRun {display:none;}
		input[readonly="readonly"], input[readonly], textarea[readonly] {color:gray;}
		.advancedOption {display:none;}
	</style>
	<!-- Library Imports -->
	<script type="text/javascript" src="../static/omf.js"></script>
	<script type="text/javascript" src="../static/jquery-1.9.1.js"></script>
	<script src="../static/highcharts.src.js"></script>
	<!-- Data  Imports -->
</head>
<body onload="init()">
	<div id="title">
		<div id="logoBox"><a href="/">&#10059;</a></div>
		<p id="titleText">New Static CVR Model</p>
	</div>
	<p class="reportTitle">New Model Input</p>
	<div id="input" class="content">
		<form name="inputForm" action="/runModel/" method="post" onsubmit="return validateForm()">
			<div class="shortInput">
				<label>Model Type</label>
				<input class="modelInput" type="text" id="modelType" name="modelType" value="cvrStatic" readonly/>
			</div>
			<div class="shortInput">
				<label>Model Name</label>
				<input class="modelInput" type="text" id="modelName" name="modelName" data-validRegex="[\w\s]+"/>
			</div>
			<div class="shortInput" class="running postRun">
				<label>User</label>
				<input class="modelInput" type="text" id="user" name="user" readonly/>
			</div>
			<div class="shortInput" class="running postRun">
				<label>Created</label>
				<input class="modelInput" type="text" id="created" name="created" readonly/>
			</div>
			<div class="shortInput" class="postRun">
				<label>Run Time</label>
				<input class="modelInput" type="text" id="runTime" name="runTime" readonly/>
			</div>
			<div class="shortInput">
				<label>Feeder</label>
				<select class="modelInput" id="feederName" name="feederName"/>
					<option disabled><strong>Personal Feeders</strong></option>
					{% for feeder in datastoreNames['feeders'] %}
						<option value="{{ datastoreNames['currentUser'].username + '___' + feeder }}">{{ feeder }}</option>
					{% endfor %}
					<option disabled><strong>Public Feeders</strong></option>
					{% for pFeeder in datastoreNames['publicFeeders'] %}
						<option value="{{ 'public___' + pFeeder }}">{{ pFeeder }}</option>
					{% endfor %}
				</select>
			</div>
			<div class="wideInput">
				<p> I AM A POTATO  I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO I AM A POTATO</p>
			</div> 
			<div class="shortInput">
				<button id="runButton" type="submit">Run Model</button>
			</div>			
		</form>
	</div>
	<p class="reportTitle">Model Input</p>
	<div id="input" class="content">
		<form name="inputForm" action="/runModel/" method="post" onsubmit="return validateForm()">
			<table class="modelOptions">
				<tr>
					<td>Model Type</td>
					<td><input type="text" id="modelType" name="modelType" value="cvrStatic" readonly/></td>
				</tr>
				<tr>
					<td>Model Name</td>
					<td><input type="text" id="modelName" name="modelName" data-validRegex="[\w\s]+"/></td>
				</tr>
				<tr class="running postRun">
					<td>User</td>
					<td><input type="text" id="user" name="user" readonly/></td>
				</tr>
				<tr class="running postRun">
					<td>Created</td>
					<td><input type="text" id="created" name="created" readonly/></td>
				</tr>
				<tr class="postRun">
					<td>Run Time</td>
					<td><input type="text" id="runTime" name="runTime" readonly/></td>
				</tr>
				<tr>
					<td>Feeder</td>
					<td>
						<select id="feederName" name="feederName"/>
							<option disabled><strong>Personal Feeders</strong></option>
							{% for feeder in datastoreNames['feeders'] %}
								<option value="{{ datastoreNames['currentUser'].username + '___' + feeder }}">{{ feeder }}</option>
							{% endfor %}
							<option disabled><strong>Public Feeders</strong></option>
							{% for pFeeder in datastoreNames['publicFeeders'] %}
								<option value="{{ 'public___' + pFeeder }}">{{ pFeeder }}</option>
							{% endfor %}
						</select>
					</td>
				</tr>
				<tr>
					<td></td>
					<td>
						<button id="runButton" type="submit">Run Model</button>
					</td>
				</tr>
			</table>
		</form>
	</div>
	<div id ="runIndicator" class="content running">
		Model running on server. Results will appear here when complete.
	</div>
	<div id="output">
		<p class="reportTitle postRun">Power Consumption From Transmission System</p>
		<div id="powerGenerationReport" class="tightContent postRun">
			<div id="powerTimeSeries"></div>
			<div id="energyBalance"></div>
			<!-- TODO: Make the energy chart sum the arrays. -->
			<script>
				powerSeries = [{"marker":{"enabled":false},"color":"red","data":allOutputData.Consumption.Power,"name":"Power Generated"}]
				new Highcharts.Chart({"credits":{"enabled":false},"plotOptions":{"series":{"pointStart":1338508800000,"shadow":false,"pointInterval":3600000},"line":{"marker":{"enabled":false}}},"xAxis":{"maxZoom":108000000,"tickColor":"gray","type":"datetime","lineColor":"gray"},"title":{"text":null},"series":powerSeries,"yAxis":{"title":{"text":"Power (W)","style":{"color":"gray"}}},"chart":{"zoomType":"x","marginBottom":20,"width":1000,"height":250,"marginRight":20,"renderTo":"powerTimeSeries","type":"line"},"tooltip":{"valueDecimals":1},"legend":{"verticalAlign":"top","align":"top","borderWidth":0,"x":50,"y":-10,"layout":"horizontal"}})
			</script>
		</div>
		<p class="reportTitle postRun">Climate</p>
		<div id="climateReport" class="tightContent postRun">
			<div id="climateChartDiv"></div>
			<script>
				climateSeriesData = [
					{"name":"Ambient Temperature (F)","marker":{"enabled":false},"color":"dimgray","data":allOutputData.climate["Ambient Temperature (F)"]},
					{"name":"Wind Speed (m/s)","marker":{"enabled":false},"color":"darkgray","data":allOutputData.climate["Wind Speed (m/s)"]},
					{"name":"Direct Irradiance (W/m^2)","marker":{"enabled":false},"color":"darkgray","data":allOutputData.climate["Direct Irradiance (W/m^2)"]},
					{"name":"Difuse Irradiance (W/m^2)","marker":{"enabled":false},"color":"gainsboro","data":allOutputData.climate["Difuse Irradiance (W/m^2)"]},
					{"name":"Cell Temperature (F)","marker":{"enabled":false},"color":"gainsboro","data":allOutputData.climate["Cell Temperature (F)"]}]
				new Highcharts.Chart({"credits":{"enabled":false},"plotOptions":{"series":{"pointStart":1338940800000,"shadow":false,"pointInterval":3600000},"line":{"marker":{"enabled":false}}},"xAxis":{"maxZoom":108000000,"tickColor":"gray","type":"datetime","lineColor":"gray"},"title":{"text":null},"series":climateSeriesData,"yAxis":{"title":{"text":"Climate Units","style":{"color":"gray"}}},"chart":{"marginBottom":20,"zoomType":"x","renderTo":"climateChartDiv","type":"line","marginRight":20, "height":250,"width":1000},"tooltip":{"valueDecimals":1},"legend":{"verticalAlign":"top","align":"top","borderWidth":0,"x":50,"y":-10,"layout":"horizontal"}})
			</script>
		</div>
	</div>
</body>