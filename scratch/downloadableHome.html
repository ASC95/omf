<head>
	<title>Open Modeling Framework</title>
	<meta charset='utf-8'>
	<link rel='stylesheet' href='../static/omf.css'/>
	<script type='text/javascript' src='../static/omf.js'></script>
	<link rel='shortcut icon' href='{{ url_for("static", filename="favicon.ico") }}'>
	<style>
		div#feeders {display:none;}
		table#anaTable {width:100%; text-align:left;}
		table#anaTable tr td:last-child {text-align:right;}
		table#anaTable tr th:last-child {text-align:right;}
		div#toolbar {padding: 0px; height:40px; line-height:40px;} /*over-riding some toolbar defaults so tabs look good.*/
		p.tab {width:90px;height:100%;display:inline-block; color:#303030; cursor:pointer; user-select:none; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;}
		p.tabSelected {background:gray; color:white;}
		td.running {color:red;}
		td.preRun {color:orange;}
		td.postRun {color:black;}
		td.terminated {color:purple;}
		td {border-bottom:1px dashed gray;}
		tr:last-child td {border-bottom:none;}
		table.importOptions {width:70%; text-align:left; margin-left:auto;}
		table.importOptions tr td:first-child {width:40%;}
		table.importOptions td {border-bottom: none}
		input[type='submit'] {width:auto; padding:4px 6px 4px; float:right;}
		a#consoleLink {width:20px; height:20px; position:absolute; top:0; right:0; background-color:dimgray; border-bottom-left-radius:5px; color: #303030; text-align:center;}
	</style>
	</script>
</head>
<body>
	<a id='consoleLink' href='/console'>C</a>
	<div id='title'>
		<div id='logoBox'><a href='/'>▦</a></div>
		<!--Title:-->Open Modeling Framework
	</div>
	<div id='toolbar'>
		<p id='analysesTab' class='tab tabSelected'>Analyses</p>
		<p id='feedersTab' class='tab' style=''>Feeders</p>
	</div>
	<div id='analyses'>
		<div class='content'>
			<table id='anaTable'>
				<tr><thead><th>Analysis</th><th>Feeder</th><th>Climate</th><th>Runtime (H:M:S)</th><th>Status</th><th></th></tr></thead>
				<tbody>
					{% for md in metadatas %}
					<tr>
						<td>{{ md['name'] }}</td>
						<td>{{ md['sourceFeeder'] }}</td>
						<td>{{ md['climate'] }}</td>
						<td>{{ md['runTime'] }}</td>
						<td class="{{ md['status'] }}">{{ md['status'] }}</td>
						<td>
							<div class='buttonGroup'>
								<button class='pill' onclick='dropPill(this, "Action")'>Action ▾</button>
								<ul class='menu right'>
									{% if md['status'] == 'postRun' %}<li><a href='/viewReports/{{ md["name"] }}'>View Reports</a></li>{% endif %}
									{% if md['status'] == 'preRun' %}<li><a href='#' onclick='var dict={};dict.analysisName="{{ md['name'] }}";post_to_url("/run/",dict)')>Run</a></li>{% endif %}
									{% if md['status'] == 'postRun' or md['status'] == 'terminated' %}<li><a href='#' onclick='var dict={};dict.analysisName="{{ md['name'] }}";post_to_url("/reRun/",dict)'>Re-Run</a></li>{% endif %}
									{% if md['status'] != 'running' %}<li><a href='#' onclick='var dict={};dict.analysisName="{{ md['name'] }}";post_to_url("/delete/",dict)'>Delete</a></li>{% endif %}
									{% if md['status'] == 'running' %}<li><a href='#' onclick='var dict={};dict.analysisName="{{ md['name'] }}";post_to_url("/terminate/",dict)'>Terminate</a></li>{% endif %}
									<li><a href='/newAnalysis/{{ md["name"] }}'>Duplicate</a></li>
								</ul>
							</div>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		<div class='content'><a href='/newAnalysis/'>New Analysis</a></div>
	</div>
</body>